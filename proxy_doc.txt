

















Renaming Middleware to Proxy | Next.js




























Skip to content











































Search documentation...

Search...
⌘K





















































Showcase

Docs

Blog

Templates





Enterprise







Search documentation...

Search...
⌘K








Feedback



Learn













 
Menu

















Using App Router

Features available in /app



















Latest Version

16.0.0





















Getting Started









Installation







Project Structure







Layouts and Pages







Linking and Navigating







Server and Client Components







Cache Components







Fetching Data







Updating Data







Caching and Revalidating







Error Handling







CSS







Image Optimization







Font Optimization







Metadata and OG images







Route Handlers







Proxy







Deploying







Upgrading















Guides












Analytics







Authentication







Backend for Frontend







Caching







CI Build Caching







Content Security Policy







CSS-in-JS







Custom Server







Data Security







Debugging







Draft Mode







Environment Variables







Forms







ISR







Instrumentation







Internationalization







JSON-LD







Lazy Loading







Development Environment







Next.js MCP Server







MDX







Memory Usage







Migrating












App Router







Create React App







Vite













Multi-tenant







Multi-zones







OpenTelemetry







Package Bundling







Prefetching







Production







PWAs







Redirecting







Sass







Scripts







Self-Hosting







SPAs







Static Exports







Tailwind CSS v3







Testing












Cypress







Jest







Playwright







Vitest













Third Party Libraries







Upgrading












Codemods







Version 14







Version 15







Version 16













Videos















API Reference









Directives












use cache







use cache: private







use cache: remote







use client







use server













Components












Font







Form Component







Image Component







Link Component







Script Component













File-system conventions












default.js







Dynamic Segments







error.js







forbidden.js










instrumentation.js







instrumentation-client.js







Intercepting Routes







layout.js







loading.js







mdx-components.js







not-found.js







page.js







Parallel Routes







proxy.js







public







route.js







Route Groups







Route Segment Config







src







template.js







unauthorized.js










Metadata Files












favicon, icon, and apple-icon







manifest.json







opengraph-image and twitter-image







robots.txt







sitemap.xml



















Functions












after







cacheLife







cacheTag







connection







cookies







draftMode







fetch







forbidden










generateImageMetadata







generateMetadata







generateSitemaps







generateStaticParams







generateViewport







headers







ImageResponse







NextRequest







NextResponse







notFound







permanentRedirect







redirect







refresh







revalidatePath







revalidateTag







unauthorized










unstable_cache







unstable_noStore










unstable_rethrow










updateTag







useLinkStatus







useParams







usePathname







useReportWebVitals







useRouter







useSearchParams







useSelectedLayoutSegment







useSelectedLayoutSegments







userAgent













Configuration












next.config.js












experimental.adapterPath







allowedDevOrigins







appDir










assetPrefix







authInterrupts










basePath







browserDebugInfoInTerminal










cacheComponents







cacheLife







compress







crossOrigin







cssChunking










devIndicators







distDir







env










expireTime







exportPathMap










generateBuildId







generateEtags







headers







htmlLimitedBots







httpAgentOptions







images







cacheHandler







inlineCss










isolatedDevBuild










logging







mdxRs







onDemandEntries







optimizePackageImports







output







pageExtensions







poweredByHeader







productionBrowserSourceMaps







proxyClientMaxBodySize










reactCompiler







reactMaxHeadersLength







reactStrictMode







redirects







rewrites







sassOptions







serverActions







serverComponentsHmrCache










serverExternalPackages







staleTimes










staticGeneration*










taint










trailingSlash







transpilePackages







turbopack







turbopackFileSystemCache







typedRoutes







typescript







urlImports










useLightningcss










viewTransition










webpack







webVitalsAttribution
















TypeScript







ESLint













CLI












create-next-app







next CLI













Edge Runtime







Turbopack















Getting Started









Installation







Project Structure







Images







Fonts







CSS







Deploying















Guides












Analytics







Authentication







Babel







CI Build Caching







Content Security Policy







CSS-in-JS







Custom Server







Debugging







Draft Mode







Environment Variables







Forms







ISR







Instrumentation







Internationalization







Lazy Loading







MDX







Migrating












App Router







Create React App







Vite













Multi-Zones







OpenTelemetry







Package Bundling







PostCSS







Preview Mode










Production







Redirecting







Sass







Scripts







Self-Hosting







Static Exports







Tailwind CSS







Testing












Cypress







Jest







Playwright







Vitest













Third Party Libraries







Upgrading












Codemods







Version 10







Version 11







Version 12







Version 13







Version 14







Version 9





















Building Your Application









Routing












Pages and Layouts







Dynamic Routes







Linking and Navigating







Custom App







Custom Document







API Routes







Custom Errors













Rendering












Server-side Rendering (SSR)







Static Site Generation (SSG)







Automatic Static Optimization







Client-side Rendering (CSR)













Data Fetching












getStaticProps







getStaticPaths







Forms and Mutations







getServerSideProps







Client-side Fetching













Configuring












Error Handling





















API Reference









Components












Font







Form







Head







Image







Image (Legacy)










Link







Script













File-system conventions












instrumentation.js







Proxy







public







src Directory













Functions












getInitialProps







getServerSideProps







getStaticPaths







getStaticProps







NextRequest







NextResponse







useReportWebVitals







useRouter







userAgent













Configuration












next.config.js Options












experimental.adapterPath







allowedDevOrigins







assetPrefix







basePath







bundlePagesRouterDependencies







compress







crossOrigin







devIndicators







distDir







env







exportPathMap







generateBuildId







generateEtags







headers







httpAgentOptions







images







isolatedDevBuild







onDemandEntries







optimizePackageImports







output







pageExtensions







poweredByHeader







productionBrowserSourceMaps







experimental.proxyClientMaxBodySize







reactStrictMode







redirects







rewrites







serverExternalPackages







trailingSlash







transpilePackages







turbopack










typescript







urlImports










useLightningcss










webpack







webVitalsAttribution













TypeScript







ESLint













CLI












create-next-app CLI







next CLI













Edge Runtime







Turbopack















Architecture









Accessibility







Fast Refresh







Next.js Compiler







Supported Browsers















Community









Contribution Guide







Rspack






















Docs






Errors






Renaming Middleware to Proxy




Renaming Middleware to Proxy


Why This Error Occurred


  

    


    


  







You are using the 
middleware
 file convention, which is deprecated and has been renamed to 

proxy

.



Migration to Proxy


  

    


    


  








Why the Change


  

    


    


  







The reason behind the renaming of 
middleware
 is that the term &quot;middleware&quot; can often be confused with Express.js middleware, leading to a misinterpretation of its purpose. Also, Middleware is highly capable, so it may encourage the usage; however, this feature is recommended to be used as a last resort.


Next.js is moving forward to provide better APIs with better ergonomics so that developers can achieve their goals without Middleware. This is the reason behind the renaming of 
middleware
.



Why &quot;Proxy&quot;


  

    


    


  







The name Proxy clarifies what Middleware is capable of. The term &quot;proxy&quot; implies that it has a network boundary in front of the app, which is the behavior of Middleware. Also, Middleware defaults to run at the 
Edge Runtime
, which can run closer to the client, separated from the app&#x27;s region. These behaviors align better with the term &quot;proxy&quot; and provide a clearer purpose of the feature.



How to Migrate


  

    


    


  







We recommend users avoid relying on Middleware unless no other options exist. Our goal is to give them APIs with better ergonomics so they can achieve their goals without Middleware.


The term “middleware” often confuses users with Express.js middleware, which can encourage misuse. To clarify our direction, we are renaming the file convention to “proxy.” This highlights that we are moving away from Middleware, breaking down its overloaded features, and making the Proxy clear in its purpose.


Next.js provides a codemod to migrate from 
middleware.ts
 to 
proxy.ts
. You can run the following command to migrate:














npx

 

@next/codemod@canary

 

middleware-to-proxy

 

.






The codemod will rename the file and the function name from 
middleware
 to 
proxy
.














// middleware.ts -&gt; proxy.ts



 



- export function middleware() {




+ export function proxy() {







Useful Links


  

    


    


  










Proxy Docs









Was this helpful?





  

  















  


















supported.




Send








































  

  

  

  

  

  

  


















Resources

Docs

Support Policy

Learn

Showcase

Blog

Team


Analytics


Next.js Conf


Previews


Evals



More


Next.js Commerce



Contact Sales


Community

GitHub

Releases

Telemetry

Governance



About Vercel


Next.js + Vercel



Open Source Software


GitHub

Bluesky

X



Legal

Privacy Policy

Cookie Preferences



Subscribe to our newsletter

Stay updated on new releases and features, guides, and case studies.







Subscribe






© 
2025
 Vercel, Inc.





  

  

  

  

  

  

  

























